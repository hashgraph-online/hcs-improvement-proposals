---
title: Transactions
sidebar_position: 5
---

import LanguageTabs from '@site/src/components/LanguageTabs';
import TabItem from '@theme/TabItem';

# Transaction Builders

The HCS-21 module exposes low-level helpers for composing adapter registry transactions (custom batching, fee schedules, or advanced signing flows).

Sources
- TypeScript: https://github.com/hashgraph-online/standards-sdk/tree/main/src/hcs-21
- Go: https://github.com/hashgraph-online/standards-sdk-go/tree/main/pkg/hcs21

## Create Registry Topic

Creates a `TopicCreateTransaction` with the correct memo format (`hcs-21:<indexed>:<ttl>:<type>:<meta>`) and optional admin/submit keys.

<LanguageTabs>
<TabItem value="typescript">

```ts
import {
  buildHcs21CreateRegistryTx,
  HCS21TopicType,
  Logger,
} from '@hashgraphonline/standards-sdk';
import { PublicKey } from '@hashgraph/sdk';

const logger = new Logger({ module: 'hcs-21-tx', level: 'info' });

const tx = buildHcs21CreateRegistryTx({
  ttl: 3600,
  indexed: 0,
  type: HCS21TopicType.ADAPTER_REGISTRY,
  adminKey: PublicKey.fromString(myAdminKey),
  submitKey: PublicKey.fromString(mySubmitKey),
});

const response = await tx.setTransactionMemo('flora adapter registry').execute(client);
const receipt = await response.getReceipt(client);
logger.info('topic ready', { topicId: receipt.topicId?.toString() });
```

</TabItem>
<TabItem value="go">

```go
import "github.com/hashgraph-online/standards-sdk-go/pkg/hcs21"

memo, err := hcs21.BuildRegistryMemo(3600, true, hcs21.TopicTypeAdapterRegistry, "")
if err != nil {
	log.Fatal(err)
}

tx, err := hcs21.BuildCreateRegistryTopicTx(hcs21.CreateRegistryTopicTxParams{
	Memo:      memo,
	AdminKey:  operatorPublicKey,
	SubmitKey: operatorPublicKey,
})
if err != nil {
	log.Fatal(err)
}

response, _ := tx.Execute(hederaClient)
receipt, _ := response.GetReceipt(hederaClient)
```

</TabItem>
</LanguageTabs>

## Adapter Declaration Message

Wraps a validated `AdapterDeclaration` into a `TopicMessageSubmitTransaction`.

<LanguageTabs>
<TabItem value="typescript">

```ts
import {
  AdapterDeclaration,
  buildHcs21MessageTx,
} from '@hashgraphonline/standards-sdk';

const declaration: AdapterDeclaration = {
  p: 'hcs-21',
  op: 'register',
  adapter_id: 'oci/@hashgraphonline/x402-bazaar-adapter@1.3.2',
  entity: 'agent',
  package: {
    registry: 'oci',
    name: '@hashgraphonline/x402-bazaar-adapter',
    version: '1.3.2',
    integrity: 'sha384-demo-digest',
  },
  manifest: 'hcs://1/0.0.600777',
  config: {
    type: 'flora',
    account: '0.0.9001',
    threshold: '2-of-3',
    ctopic: '0.0.9101',
    ttopic: '0.0.9102',
    stopic: '0.0.9103',
  },
  state_model: 'hcs-21.entity-consensus@1',
};

const tx = buildHcs21MessageTx({
  topicId: '0.0.700999',
  declaration,
  transactionMemo: 'adapter declaration',
});

await (await tx.execute(client)).getReceipt(client);
```

</TabItem>
<TabItem value="go">

```go
declaration := hcs21.AdapterDeclaration{
	Protocol:  "hcs-21",
	Op:        "register",
	AdapterID: "oci/@hashgraphonline/x402-bazaar-adapter@1.3.2",
	Entity:    "agent",
	Package: hcs21.PackageInfo{
		Registry:  "oci",
		Name:      "@hashgraphonline/x402-bazaar-adapter",
		Version:   "1.3.2",
		Integrity: "sha384-demo-digest",
	},
	Manifest: "hcs://1/0.0.600777",
	Config: map[string]any{
		"type":      "flora",
		"account":   "0.0.9001",
		"threshold": "2-of-3",
		"ctopic":    "0.0.9101",
		"ttopic":    "0.0.9102",
		"stopic":    "0.0.9103",
	},
	StateModel: "hcs-21.entity-consensus@1",
}

tx, err := hcs21.BuildDeclarationMessageTx("0.0.700999", declaration, "adapter declaration")
if err != nil {
	log.Fatal(err)
}

response, _ := tx.Execute(hederaClient)
```

</TabItem>
</LanguageTabs>

Combine these builders with other Standards SDK utilities whenever you need full control over transaction signing.
